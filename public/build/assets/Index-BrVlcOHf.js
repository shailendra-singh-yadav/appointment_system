import{u as k,p as $,q as C,s as u,c as P,o as p,w as d,a as e,g as x,f,S as g,h as v,d as y,F as A,r as B,j as _,t as i,Q as h}from"./app-BaX4SUui.js";import{_ as E}from"./AuthenticatedLayout-BBK8sQzv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},I={class:"flex justify-between items-center mb-6"},M={class:"bg-white rounded-lg shadow overflow-x-auto"},N={class:"min-w-full divide-y divide-gray-200"},T={class:"bg-white divide-y divide-gray-200"},V=["onDragstart","onDrop"],j={class:"px-6 py-4 text-gray-800"},Q={class:"px-6 py-4 text-gray-800"},q={class:"px-6 py-4 text-gray-800"},L={class:"px-6 py-4 text-gray-800"},O={class:"px-6 py-4 space-x-4"},z=["onClick"],R={__name:"Index",props:{posts:Array},setup(m){const o=k();$(()=>{const s=C().props.flash;s!=null&&s.success&&o.success(s.success),s!=null&&s.error&&o.error(s.error)});const a=u([...m.posts]),c=u(null);function b(s){c.value=s}function w(s){const t=c.value;if(t===null||t===s)return;const r=a.value[t];a.value.splice(t,1),a.value.splice(s,0,r),c.value=null;const n=a.value.map((l,S)=>({id:l.id,order:S+1}));h.post("/posts/reorder",{ordered:n},{preserveScroll:!0,onSuccess:()=>o.success("Post reordered!"),onError:()=>o.error("Failed to reorder!")})}function D(s,t){window.confirm("Are you sure you want to delete this post?")&&h.delete(`/posts/${s.id}`,{preserveScroll:!0,onSuccess:()=>{a.value.splice(t,1),o.success("🗑️ Post moved to trash!")},onError:()=>o.error("❌ Failed to delete post")})}return(s,t)=>(p(),P(E,null,{header:d(()=>t[1]||(t[1]=[e("h2",{class:"text-2xl font-semibold text-gray-800"},"📋 Manage Posts",-1)])),default:d(()=>[e("div",F,[e("div",I,[t[3]||(t[3]=e("h1",{class:"text-xl font-bold text-gray-700"},"All Posts",-1)),x(f(g),{href:"/posts/create",class:"bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded shadow"},{default:d(()=>t[2]||(t[2]=[v(" + Create Post ")])),_:1,__:[2]})]),e("div",M,[e("table",N,[t[5]||(t[5]=e("thead",{class:"bg-gray-100 text-gray-700 text-sm uppercase"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left"},"Title"),e("th",{class:"px-6 py-3 text-left"},"Order"),e("th",{class:"px-6 py-3 text-left"},"Content"),e("th",{class:"px-6 py-3 text-left"},"Date"),e("th",{class:"px-6 py-3 text-left"},"Actions")])],-1)),e("tbody",T,[(p(!0),y(A,null,B(a.value,(r,n)=>(p(),y("tr",{key:r.id,draggable:"true",onDragstart:l=>b(n),onDragover:t[0]||(t[0]=_(()=>{},["prevent"])),onDrop:l=>w(n),class:"hover:bg-gray-50 transition cursor-move"},[e("td",j,i(r.title),1),e("td",Q,i(r.order),1),e("td",q,i(r.content),1),e("td",L,i(r.created_at),1),e("td",O,[x(f(g),{href:`/posts/${r.id}/edit`,class:"text-blue-600 hover:underline"},{default:d(()=>t[4]||(t[4]=[v(" Edit ")])),_:2,__:[4]},1032,["href"]),e("button",{onClick:_(l=>D(r,n),["prevent"]),class:"text-red-600 hover:underline"}," Delete ",8,z)])],40,V))),128))])])])])]),_:1}))}};export{R as default};
